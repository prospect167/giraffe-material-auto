# ä¿å­˜ç›®å½•é…ç½®è¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æ–°å¢äº†çµæ´»çš„ç›®å½•é…ç½®åŠŸèƒ½ï¼Œæ”¯æŒï¼š
- âœ… ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„
- âœ… è‡ªå®šä¹‰å®Œæ•´ä¿å­˜è·¯å¾„
- âœ… å¯é€‰çš„æ—¶é—´æˆ³å­ç›®å½•
- âœ… è‡ªå®šä¹‰æ—¶é—´æˆ³æ ¼å¼
- âœ… æ”¯æŒ `~` å¼€å¤´çš„ç”¨æˆ·ç›®å½•

## ğŸ“ å‚æ•°è¯´æ˜

### 1. `savePath` - å®Œæ•´ä¿å­˜è·¯å¾„ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰

ç›´æ¥æŒ‡å®šå®Œæ•´çš„ä¿å­˜è·¯å¾„ï¼Œä¼šå¿½ç•¥ `targetDir` å’Œ `basePath`ã€‚

```json
{
  "url": "https://example.com/photos",
  "savePath": "/Users/prospect/my_photos"
}
```

### 2. `targetDir` - ç›®æ ‡ç›®å½•

å¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼š
- **ç›¸å¯¹è·¯å¾„**ï¼šç›¸å¯¹äºé…ç½®æ–‡ä»¶ä¸­çš„ `basePath`
- **ç»å¯¹è·¯å¾„**ï¼šä»¥ `/` å¼€å¤´ï¼ˆLinux/Macï¼‰æˆ– `C:\` å¼€å¤´ï¼ˆWindowsï¼‰

### 3. `useTimestamp` - æ˜¯å¦ä½¿ç”¨æ—¶é—´æˆ³

æ§åˆ¶æ˜¯å¦åœ¨ç›®æ ‡ç›®å½•ä¸‹åˆ›å»ºæ—¶é—´æˆ³å­ç›®å½•ï¼š
- `true`ï¼ˆé»˜è®¤ï¼‰ï¼šåˆ›å»ºæ—¶é—´æˆ³å­ç›®å½•
- `false`ï¼šç›´æ¥ä½¿ç”¨ç›®æ ‡ç›®å½•

### 4. `timestampFormat` - æ—¶é—´æˆ³æ ¼å¼

è‡ªå®šä¹‰æ—¶é—´æˆ³ç›®å½•çš„å‘½åæ ¼å¼ï¼ˆé»˜è®¤ï¼š`yyyyMMdd_HHmmss`ï¼‰

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šä½¿ç”¨é»˜è®¤é…ç½®

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "targetDir": "my_photos"
  }'
```

**ç»“æœ**ï¼š`./downloads/my_photos/20251230_180000/`

---

### ç¤ºä¾‹ 2ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "targetDir": "/Users/prospect/Pictures/downloaded"
  }'
```

**ç»“æœ**ï¼š`/Users/prospect/Pictures/downloaded/20251230_180000/`

---

### ç¤ºä¾‹ 3ï¼šä¸ä½¿ç”¨æ—¶é—´æˆ³å­ç›®å½•

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "targetDir": "my_photos",
    "useTimestamp": false
  }'
```

**ç»“æœ**ï¼š`./downloads/my_photos/`

---

### ç¤ºä¾‹ 4ï¼šè‡ªå®šä¹‰æ—¶é—´æˆ³æ ¼å¼ï¼ˆæŒ‰æ—¥æœŸåˆ†ç»„ï¼‰

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "targetDir": "daily_photos",
    "timestampFormat": "yyyy-MM-dd"
  }'
```

**ç»“æœ**ï¼š`./downloads/daily_photos/2025-12-30/`

---

### ç¤ºä¾‹ 5ï¼šä½¿ç”¨å®Œæ•´è·¯å¾„ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "savePath": "/Users/prospect/Downloads/movie_photos"
  }'
```

**ç»“æœ**ï¼š`/Users/prospect/Downloads/movie_photos/20251230_180000/`

---

### ç¤ºä¾‹ 6ï¼šå®Œæ•´è·¯å¾„ + ä¸ä½¿ç”¨æ—¶é—´æˆ³

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "savePath": "/Users/prospect/Downloads/latest_photos",
    "useTimestamp": false
  }'
```

**ç»“æœ**ï¼š`/Users/prospect/Downloads/latest_photos/`

---

### ç¤ºä¾‹ 7ï¼šä½¿ç”¨ç”¨æˆ·ç›®å½• (~)

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "savePath": "~/Pictures/my_downloads"
  }'
```

**ç»“æœ**ï¼š`/Users/prospect/Pictures/my_downloads/20251230_180000/`

---

### ç¤ºä¾‹ 8ï¼šå¤æ‚åœºæ™¯ - å»æ°´å° + è‡ªå®šä¹‰è·¯å¾„

```bash
curl -X POST http://localhost:8080/api/v1/download/images \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://example.com/photos",
    "savePath": "/Users/prospect/Projects/images",
    "useTimestamp": false,
    "removeWatermark": true,
    "watermarkProvider": "aliyun"
  }'
```

**ç»“æœ**ï¼š
- åŸå›¾ï¼š`/Users/prospect/Projects/images/original/`
- å»æ°´å°ï¼š`/Users/prospect/Projects/images/cleaned/`

---

## ğŸ¨ æ—¶é—´æˆ³æ ¼å¼ç¤ºä¾‹

| æ ¼å¼ | ç¤ºä¾‹ | è¯´æ˜ |
|------|------|------|
| `yyyyMMdd_HHmmss` | `20251230_180000` | é»˜è®¤æ ¼å¼ |
| `yyyy-MM-dd` | `2025-12-30` | æŒ‰æ—¥æœŸ |
| `yyyyMMdd` | `20251230` | ç®€çŸ­æ—¥æœŸ |
| `yyyy/MM/dd` | `2025/12/30` | åˆ†å±‚æ—¥æœŸ |
| `yyyy-MM-dd_HH-mm` | `2025-12-30_18-00` | ç²¾ç¡®åˆ°åˆ†é’Ÿ |
| `yyyyMM` | `202512` | æŒ‰æœˆä»½ |
| `yyyy-ww` | `2025-52` | æŒ‰å‘¨ |

---

## ğŸ”„ è·¯å¾„ä¼˜å…ˆçº§

```
1. savePathï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
   â†“
2. targetDirï¼ˆç»å¯¹è·¯å¾„ï¼‰
   â†“
3. targetDirï¼ˆç›¸å¯¹è·¯å¾„ï¼‰+ basePath
   â†“
4. basePathï¼ˆé»˜è®¤é…ç½®ï¼‰
```

---

## ğŸ“‹ å®Œæ•´å‚æ•°å¯¹ç…§è¡¨

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `savePath` | String | null | å®Œæ•´ä¿å­˜è·¯å¾„ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ |
| `targetDir` | String | null | ç›®æ ‡ç›®å½•ï¼ˆç›¸å¯¹æˆ–ç»å¯¹ï¼‰ |
| `useTimestamp` | Boolean | true | æ˜¯å¦åˆ›å»ºæ—¶é—´æˆ³å­ç›®å½• |
| `timestampFormat` | String | `yyyyMMdd_HHmmss` | æ—¶é—´æˆ³æ ¼å¼ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. è·¯å¾„æƒé™

ç¡®ä¿åº”ç”¨æœ‰æƒé™å†™å…¥æŒ‡å®šçš„ç›®å½•ï¼š

```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -ld /path/to/directory

# å¦‚æœæ²¡æœ‰æƒé™ï¼Œä¿®æ”¹æƒé™
chmod 755 /path/to/directory
```

### 2. ç£ç›˜ç©ºé—´

ä½¿ç”¨ç»å¯¹è·¯å¾„æ—¶ï¼Œç¡®ä¿ç›®æ ‡ç£ç›˜æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼š

```bash
# æŸ¥çœ‹ç£ç›˜ç©ºé—´
df -h /path/to/directory
```

### 3. è·¯å¾„å†²çª

å¦‚æœ `useTimestamp=false` ä¸”å¤šæ¬¡ä¸‹è½½åˆ°åŒä¸€ç›®å½•ï¼Œå¯èƒ½ä¼šè¦†ç›–æ–‡ä»¶ã€‚å»ºè®®ï¼š
- ä½¿ç”¨æ—¶é—´æˆ³å­ç›®å½•
- æˆ–è€…ä¸ºæ¯æ¬¡ä¸‹è½½æŒ‡å®šä¸åŒçš„ç›®å½•

### 4. Windows è·¯å¾„

Windows ç³»ç»Ÿä½¿ç”¨åæ–œæ ï¼Œéœ€è¦è½¬ä¹‰æˆ–ä½¿ç”¨æ­£æ–œæ ï¼š

```json
// æ–¹å¼1ï¼šä½¿ç”¨æ­£æ–œæ ï¼ˆæ¨èï¼‰
{
  "savePath": "C:/Users/username/photos"
}

// æ–¹å¼2ï¼šè½¬ä¹‰åæ–œæ 
{
  "savePath": "C:\\Users\\username\\photos"
}
```

---

## ğŸ¯ å®ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæŒ‰é¡¹ç›®åˆ†ç±»

```bash
# é¡¹ç›® A
curl -X POST ... -d '{"savePath": "~/Projects/ProjectA/materials", "useTimestamp": false}'

# é¡¹ç›® B
curl -X POST ... -d '{"savePath": "~/Projects/ProjectB/materials", "useTimestamp": false}'
```

### åœºæ™¯ 2ï¼šæŒ‰æ—¥æœŸå½’æ¡£

```bash
curl -X POST ... -d '{
  "targetDir": "archive",
  "timestampFormat": "yyyy/MM/dd"
}'
```

ç»“æœï¼š`./downloads/archive/2025/12/30/`

### åœºæ™¯ 3ï¼šä¸´æ—¶ä¸‹è½½

```bash
curl -X POST ... -d '{
  "savePath": "/tmp/temp_downloads",
  "useTimestamp": false
}'
```

### åœºæ™¯ 4ï¼šç½‘ç»œå­˜å‚¨

```bash
curl -X POST ... -d '{
  "savePath": "/Volumes/NAS/shared_photos",
  "timestampFormat": "yyyy-MM-dd"
}'
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. åº”ç”¨æ—¥å¿—ï¼š`logs/giraffe-material-auto.log`
2. æ£€æŸ¥ç›®å½•æƒé™å’Œç£ç›˜ç©ºé—´
3. æäº¤ Issue æˆ–è”ç³»å¼€å‘å›¢é˜Ÿ

